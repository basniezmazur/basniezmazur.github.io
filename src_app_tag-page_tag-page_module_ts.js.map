{"version":3,"file":"src_app_tag-page_tag-page_module_ts.js","mappings":"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","sources":["./src/app/tag-page/tag-page-routing.module.ts","./src/app/tag-page/tag-page.module.ts","./src/app/tag-page/tag-page.page.ts","./src/app/tag-page/tag-page.page.scss"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TagPagePage } from './tag-page.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TagPagePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TagPagePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { TagPagePageRoutingModule } from './tag-page-routing.module';\nimport { TagPagePage } from './tag-page.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TagPagePageRoutingModule,\n    TranslateModule,\n    ComponentsModule,\n  ],\n  declarations: [TagPagePage]\n})\nexport class TagPagePageModule {}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { IonContent } from \"@ionic/angular\";\nimport { ActivatedRoute } from '@angular/router';\nimport { Service } from '../../app/services/Service';\nimport { Title, Meta } from '@angular/platform-browser';\nimport { Legenda } from 'src/app/entities/legenda';\nimport { Category } from 'src/app/entities/category';\nimport { Settings } from 'src/app/entities/settings';\n\n@Component({\n  selector: 'app-tag-page',\n  templateUrl: './tag-page.page.html',\n  styleUrls: ['./tag-page.page.scss'],\n})\n\nexport class TagPagePage implements OnInit {\n  legendy: Legenda[] = [];\n  categories: Category[] = [];\n  loadingLegenda = true;\n  lastNumberLegenda = 20;\n  pageLegenda = 1;\n  noMorePosts: boolean = false;\n  infinityShow = false;\n\n  private refreshEvent;\n  private infinityLegendyEvent;\n  \n  category;\n  categoryId;\n  categoryDescripton;\n  categoryName;\n  seo_description;\n  seo_short;\n  \n  today = new Date();\n  currentDate = this.today.getFullYear()+'-'+(this.today.getMonth()+1)+'-'+this.today.getDate();\n\nconstructor(\n\tprivate titleService: Title,\n\tprivate meta: Meta,\n\tprivate route: ActivatedRoute,\n\tprivate service: Service,\n    public settings: Settings,\n) {\n\n}\n\n  loadMoreLegendy(lang: string) {\n    this.loadingLegenda = true;\n    this.service.getTag(this.pageLegenda, this.categoryId, lang).then((response: Legenda[]) => {\n        if(response['error']){\n          // console.log(response['error'])\n          this.lastNumberLegenda = 0;\n          this.loadingLegenda = false;\n          if (this.refreshEvent) this.refreshEvent.target.complete();\n          if (this.infinityLegendyEvent) this.infinityLegendyEvent.target.complete();\n          if (response['error'].data.status == 400) {\n          setTimeout(() => {\n            this.noMorePosts = true;\n          }, 0);\n          }\n        } else if (response) {\n          // console.log(response);\n          this.legendy = this.legendy.concat(response);\n          this.lastNumberLegenda = response.length;\n          this.pageLegenda = this.pageLegenda + 1;\n          this.loadingLegenda = false;\n          if (this.refreshEvent) this.refreshEvent.target.complete();\n          if (this.infinityLegendyEvent) this.infinityLegendyEvent.target.complete();\n        }\n    });\n  }\n  \n  infinityLegendy(event) {\n    this.infinityLegendyEvent = event;\n    this.loadMoreLegendy(this.settings.langCode);\n    setTimeout(() => {\n      event.target.complete();\n    }, 2400);\n  }\n\n  madeRefresh(event) {\n    location.reload();\n  }\n  \n  \n  ngOnInit() {\n    this.route.paramMap.subscribe((paramMap) => {\n      this.settings.langCode = this.route.snapshot.paramMap.get(\"lang\");\n      this.category = paramMap.get('slug');\n      this.loadingLegenda = true;\n\n      this.service.searchCategory(this.category, this.settings.langCode).then((response: Category[]) => {\n        if(response['error']){\n          // console.log(response['error'])\n        } else if (response) {\n          // console.log(response);\n          this.categoryId = response[0].id;\n          this.categoryName = response[0].name;\n          this.categoryDescripton = response[0].description;\n          this.seo_short = this.categoryDescripton.replaceAll(/(\\r\\n|\\n|\\r)/gm, \"\");\n          this.seo_description = this.seo_short.match(/^.{1,150}/g);\n          // console.log(this.seo_description);\n          this.loadMoreLegendy(this.settings.langCode);\n\n\n          document.documentElement.setAttribute(\"lang\", this.settings.langCode);\n          this.titleService.setTitle('Tag: ' + this.categoryName + ' • Baśnie z Mazur');\n          this.meta.updateTag({ name: 'description', content: this.seo_description});\n          // OpenGraph Meta Tags\n          this.meta.updateTag({ property: 'og:title', content: 'Tag: ' + this.categoryName + ' • Baśnie z Mazur'});\n          this.meta.updateTag({ property: 'og:description', content: this.seo_description});\n          this.meta.updateTag({ property: 'og:image', content: 'https://basniezmazur.pl/service/assets/images/2022/02/legendy_z_mazur_tlo.png'});\n          this.meta.updateTag({ property: 'og:type', content: 'website'});\n          this.meta.updateTag({ property: 'og:url', content: 'https://basniezmazur.pl/tag/' + this.category });\n          // Twitter Meta Tags\n          this.meta.updateTag({ property: 'twitter:title', content: 'Tag: ' + this.categoryName + ' • Baśnie z Mazur'});\n          this.meta.updateTag({ property: 'twitter:description', content: this.seo_description});\n          this.meta.updateTag({ property: 'twitter:image', content: 'https://basniezmazur.pl/service/assets/images/2022/02/legendy_z_mazur_tlo.png'});\n          this.meta.updateTag({ property: 'twitter:url', content: 'https://basniezmazur.pl/tag/' + this.category});\n        \n        \n          // Schema Markup\n          function addScript(attribute, text, callback) {\n          var schema = document.createElement('script');\n            for (var attr in attribute) {\n              schema.setAttribute(attr, attribute[attr] ? attribute[attr] : null)\n            }\n            schema.innerHTML = text;\n            schema.onload = callback;\n            document.head.appendChild(schema);\n          }\n          addScript({\n            type: 'application/ld+json',\n          },\n          '{\"@context\":\"https://schema.org\",\"@graph\":[{\"@type\":\"Article\",\"datePublished\":\"' + this.currentDate + '\",\"headline\":\"Tag: '+ this.categoryName +' • Legendy z Mazur\",\"description\":\"' + this.seo_description + '\",\"name\":\"' + this.categoryName + '\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"Tag: '+ this.categoryName +' • Legendy z Mazur\",\"url\":\"' + this.categoryName + '\",\"height\":670,\"width\":1200,\"caption\":\"Tag: '+ this.categoryName +' • Legendy z Mazur\"},\"thumbnailUrl\":\"' + this.categoryName + '\"}]}',\n          function(){});\n        \n        \n        }\n      });\n    });\n  }\n\n  ionViewDidEnter() {\n  }\n  \n  ngOnDestroy() {\n    this.legendy = [];\n    this.lastNumberLegenda = 0;\n    this.pageLegenda = 0;\n  }\n  \n}","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["NgModule","RouterModule","TagPagePage","routes","path","component","TagPagePageRoutingModule","imports","forChild","exports","CommonModule","FormsModule","IonicModule","TranslateModule","ComponentsModule","TagPagePageModule","declarations","Component","ActivatedRoute","Service","Title","Meta","Settings","constructor","titleService","meta","route","service","settings","Date","today","getFullYear","getMonth","getDate","loadMoreLegendy","lang","loadingLegenda","getTag","pageLegenda","categoryId","then","response","lastNumberLegenda","refreshEvent","target","complete","infinityLegendyEvent","data","status","setTimeout","noMorePosts","legendy","concat","length","infinityLegendy","event","langCode","madeRefresh","location","reload","ngOnInit","paramMap","subscribe","snapshot","get","category","searchCategory","id","categoryName","name","categoryDescripton","description","seo_short","replaceAll","seo_description","match","document","documentElement","setAttribute","setTitle","updateTag","content","property","addScript","attribute","text","callback","schema","createElement","attr","innerHTML","onload","head","appendChild","type","currentDate","ionViewDidEnter","ngOnDestroy","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}